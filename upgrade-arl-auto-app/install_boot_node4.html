<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Install and boot node4</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Install and boot node4" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" />
	<meta property="og:description" content="Install and boot node4 and install ONTAP software when upgrading controllers running ONTAP 9.8 or later by using `system controller replace` commands." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-systems-upgrade/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/><meta name="description" content="Install and boot node4 and install ONTAP software when upgrading controllers running ONTAP 9.8 or later by using `system controller replace` commands.">
  <meta name="keywords" content=" install, boot, node4, install ONTAP"><!-- Icons -->
  <link rel="icon" href="/us-en/ontap-systems-upgrade/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed --><!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems-upgrade/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems-upgrade/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems-upgrade/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems-upgrade/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/ontap-systems-upgrade/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/ontap-systems-upgrade/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/custom-dropdown.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/ontap-systems-upgrade/css/tabbed-blocks.css" type="text/css">
  <!-- Canonical url -->
  <link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/na-feature.css' type='text/css'><!-- Top level site integrations --><script>
    if (document.location.hostname === "docs.netapp.com") {
      var head = document.getElementsByTagName('head')[0];
      var onetrustConsent = document.createElement("script");
      onetrustConsent.type = "text/javascript";
      onetrustConsent.src = "https://cdn.cookielaw.org/consent/72570c5c-fe30-465f-b0e0-b77f7fb4ae34/OtAutoBlock.js";
      head.appendChild(onetrustConsent);

      var onetrustScript = document.createElement("script");
      onetrustScript.type = "text/javascript";
      onetrustScript.src = "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";
      onetrustScript.charset = "UTF-8";
      onetrustScript.dataset.documentLanguage = "true";
      onetrustScript.dataset.domainScript = "72570c5c-fe30-465f-b0e0-b77f7fb4ae34";
      head.appendChild(onetrustScript);
    }

    function OptanonWrapper() { }

    if (document.location.hostname === "docs.netapp.com") {
      var adobe = document.createElement("script");
      adobe.type = "text/plain";
      adobe.className = "optanon-category-C0002";
      adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
      head.appendChild(adobe);

      var google = document.createElement("script");
      google.type = "text/plain";
      google.className = "optanon-category-C0002";
      google.src = "https://www.googletagmanager.com/gtag/js?id=UA-81697994-3";
      head.appendChild(google);

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-81697994-3');
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <!-- Used for Product Family Page Sidebar Visibility --><!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src='/us-en/ontap-systems-upgrade/js/na-search.js'></script><script src='/us-en/ontap-systems-upgrade/js/na-pagenav.js'></script><link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems-upgrade/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/ontap-systems-upgrade/js/na-utility.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/clouddocs.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/ontap-systems-upgrade/js/toc.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/customscripts.js'></script><script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>
  <script src='/us-en/ontap-systems-upgrade/js/custom-dropdown.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/FileSaver.min.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/jszip-utils.min.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/jszip.min.js'></script>
  <script src='/us-en/ontap-systems-upgrade/js/pdf-ux.js'></script>
</head>


  <body class role="document" data-flavor="">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  
  <!-- Start Page Toolbar -->
  
  <div class="page-nav-toolbar"><div class="page-nav-contribute"><a target="_blank" href="https://github.com/NetAppDocs/ontap-systems-upgrade/issues/new?body=Page%3A%20[Install and boot node4](https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html)" class="page-nav-contribute-link" role="button"><img src="/us-en/ontap-systems-upgrade/images/discuss-sm.svg" class="github-icon" />Request doc changes</a><a target="_blank" href="https://github.com/NetAppDocs/ontap-systems-upgrade/blob/main/upgrade-arl-auto-app/install_boot_node4.adoc" class="page-nav-contribute-link" role="button"><img src="/us-en/ontap-systems-upgrade/images/edit-sm.svg" class="github-icon" />Edit this page</a><a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  ><img src="/us-en/ontap-systems-upgrade/images/article-sm.svg" class="github-icon" />Learn how to contribute</a></div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" 
          data-search-html="/us-en/ontap-systems-upgrade/search.html"
          data-type="widget" 
          data-placeholder="Search Documentation" 
          data-no-results-found="No results were found for {query}" 
          data-did-you-mean="Search for {suggestion}." 
          data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" 
          data-results-found="{hitCount} results found"  
          data-sk-es-pf-indexes=""
          data-flavor=""></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar">
    <!-- Start Language Selector --><div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">English</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>
      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list"><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ja-jp/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" class="n-menu__header-text"><span translate="no" class="notranslate">日本語</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/ko-kr/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" class="n-menu__header-text"><span translate="no" class="notranslate">한국어</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-cn/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" class="n-menu__header-text"><span translate="no" class="notranslate">简体中文</span></a>
                </li><li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="https://docs.netapp.com/zh-tw/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html" class="n-menu__header-text"><span translate="no" class="notranslate">繁體中文</span></a>
                </li></ul>
            </li>
          </ul>
        </div>
      </div>
    </div><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" id="sidebar-height">
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">
    <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>Available PDFs<span>
    </span>
  </a>
</div>
<div class="n-pdf-body-container">
  <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
        
        
        
        <a target="_blank" href="/us-en/ontap-systems-upgrade/pdfs/fullsite-sidebar/AFF_and_FAS_System_Upgrade_Documentation.pdf" >
          <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>PDF of this doc site</a>



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_volumes_or_storage.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Upgrade by moving volumes or storage
          </a>
          







    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_storage.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Upgrade by moving storage
          </a>
          















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Optional___Move_internal_storage_or_convert_to_drive_shelf.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Optional - Move internal storage or convert to drive shelf
          </a>
          







          
        </li>
      </ul>
    

  







    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Complete upgrade
          </a>
          

    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Overview.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Overview
          </a>
          

    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_in_ONTAP_9_8.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Complete in ONTAP 9.8
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Complete_in_ONTAP_9_7_or_earlier.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Complete in ONTAP 9.7 or earlier
          </a>
          







          
        </li>
      </ul>
    

  



          
        </li>
      </ul>
    

  



          
        </li>
      </ul>
    

  



          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Upgrade_by_moving_volumes.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Upgrade by moving volumes
          </a>
          











    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Move__delete__or_create_SAN_LIFS.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Move, delete, or create SAN LIFS
          </a>
          









          
        </li>
      </ul>
    

  







          
        </li>
      </ul>
    

  



          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use_aggregate_relocation_to_upgrade_controller_hardware.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Use aggregate relocation to upgrade controller hardware
          </a>
          



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_AFF_A700_to_AFF_A900_running_ONTAP_9_10_1_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Use "system controller replace" commands to upgrade AFF A700 to AFF A900 running ONTAP 9.10.1 or later
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_resources_and_retire_AFF_A700_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 2. Relocate resources and retire AFF A700 node1
          </a>
          









          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Boot_node1_with_the_AFF_A900_controller_module_and_NVRAM_module.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 3. Boot node1 with the AFF A900 controller module and NVRAM module
          </a>
          









          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_resources_from_node2_and_retire_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 4. Relocate resources from node2 and retire node2
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_the_AFF_A900_NVRAM_module_and_controller_module_on_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 5. Install the AFF A900 NVRAM module and controller module on node2
          </a>
          





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Boot_node2_with_the_AFF_A900_controller_module_and_NVRAM_module.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 6. Boot node2 with the AFF A900 controller module and NVRAM module
          </a>
          









          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_7__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 7. Complete the upgrade
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Troubleshoot
          </a>
          











          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_controller_hardware_running_ONTAP_9_8_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later
          </a>
          



















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_and_retire_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 4. Relocate and retire node2
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          


    <ul class="subfolders" style="display:none;"><li class="active pdf-hide">
  <a target="_blank" href="/us-en/ontap-systems-upgrade/pdfs/pages/upgrade-arl-auto-app/install_boot_node4.pdf" >
    <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
    PDF of this page
  </a>
</li>

</ul>
  











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Troubleshoot
          </a>
          











          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Manually_upgrade_controller_hardware_running_ONTAP_9_8_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Manually upgrade controller hardware running ONTAP 9.8 or later
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          

















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          

















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Record_information_and_retire_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 4. Record information and retire node2
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Troubleshoot
          </a>
          













          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Use__system_controller_replace__commands_to_upgrade_controller_hardware_running_ONTAP_9_5_to_9_7.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7
          </a>
          



















    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Relocate_and_retire_node.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 4. Relocate and retire node
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Troubleshoot
          </a>
          











          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Manually_upgrade_controller_hardware_running_ONTAP_9_7_or_earlier.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Manually upgrade controller hardware running ONTAP 9.7 or earlier
          </a>
          













    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Reconfigure_the_FC_switch_layout_for_ONTAP_9_1_or_later.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Reconfigure the FC switch layout for ONTAP 9.1 or later
          </a>
          



















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_1__Prepare_for_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 1. Prepare for upgrade
          </a>
          

















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_2__Relocate_and_retire_node1.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 2. Relocate and retire node1
          </a>
          











          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_3__Install_and_boot_node3.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 3. Install and boot node3
          </a>
          



















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_4__Record_information_and_retire_node2.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 4. Record information and retire node2
          </a>
          







          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_5__Install_and_boot_node4.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 5. Install and boot node4
          </a>
          

















          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Stage_6__Complete_the_upgrade.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Stage 6. Complete the upgrade
          </a>
          













          
        </li>
      </ul>
    

  



    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" 
            
              href="/us-en/ontap-systems-upgrade/pdfs/sidebar/Troubleshoot.pdf" 
            
          >
            <img src="/us-en/ontap-systems-upgrade/images/pdf.png" width="16" height="16"/>
            Troubleshoot
          </a>
          













          
        </li>
      </ul>
    

  





          
        </li>
      </ul>
    

  



          
        </li>
      </ul>
    

  


</li></ul>
  <div class="zip-pdf-link-container" style="display: none;">   
    <a href="#" id="zipPdf">
      <img src="/us-en/ontap-systems-upgrade/images/pdf-zip.png" width="16" height="16"/>
      <pre>Collection of separate PDF docs<span class="zip-size"></span></pre>
    </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
</div>
<script>
  $("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
  });
</script><div class="sidebar-nav-container">
  <ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/index.html">
        AFF and FAS System Upgrade Documentation
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Upgrade by moving volumes or storage</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-decide-to-use-this-guide.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-considerations.html">
        Considerations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-methods.html">
        Choose method
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Upgrade by moving storage</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-by-moving-storage-parent.html">
        Workflow
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-prepare-when-moving-storage.html">
        Prepare
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-shutdown-remove-original-nodes.html">
        Shut down original nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-remove-disk-ownership-new-nodes.html">
        Remove disk ownership
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-reset-default-configuration-node3-and-node4.html">
        Reset default configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-install-new-nodes.html">
        Install new nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-set-up-new-nodes.html">
        Set up new nodes
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Optional - Move internal storage or convert to drive shelf</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-optional-move-internal-storage.html">
        Choices
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-move-internal-drives.html">
        Move internal drives
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-convert-node-to-shelf.html">
        Convert node to drive shelf
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-attach-shelves-reassign-disks.html">
        Attach storage shelves and reassign disk ownership
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-restore-root-volume-config.html">
        Restore root volume configuration
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Complete upgrade</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete.html">
        <div class="na-navbar-padding"> Overview</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Complete in ONTAP 9.8</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-ontap-9-8.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-map-network-ports-ontap-9-8.html">
        Map network ports using ONTAP 9.8
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-final-upgrade-steps-in-ontap-9-8.html">
        Perform final steps in ONTAP 9.8
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Complete in ONTAP 9.7 or earlier</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-ontap-9-7-or-earlier.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-map-network-ports-ontap-9-7-or-earlier.html">
        Map network ports using ONTAP 9.7 or earlier
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-final-steps-ontap-9-7-or-earlier-move-storage.html">
        Perform final steps in ONTAP 9.7 or earlier
      </a></li></ul></li></ul></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Upgrade by moving volumes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-by-moving-volumes-parent.html">
        Workflow
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-prepare-when-moving-volumes.html">
        Prepare
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-install-and-join-new-nodes-move-vols.html">
        Install and join new nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-create-aggregate-move-volumes.html">
        Create aggregate and move volumes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-move-lifs-to-new-nodes.html">
        Move non-SAN data LIFs and cluster management LIFs
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Move, delete, or create SAN LIFS</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade_move_delete_recreate_san_lifs.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade_considerations_move_san_lifs.html">
        Considerations for moving SAN LIFs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-delete-san-lifs.html">
        Delete SAN LIFs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade_create_recreate_san_lifs.html">
        Create new SAN LIFs or re-create deleted SAN LIFs
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-unjoin-original-nodes-move-volumes.html">
        Unjoin original nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade/upgrade-complete-move-volumes.html">
        Complete upgrade
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use aggregate relocation to upgrade controller hardware</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl/index.html">
        Overview
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use "system controller replace" commands to upgrade AFF A700 to AFF A900 running ONTAP 9.10.1 or later</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/automate_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading from an AFF A700 to an AFF A900 with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1. Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_upgrade_hardware.html">
        Verify the upgrade hardware
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/get_ip_address_of_external_kms_for_storage_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2. Relocate resources and retire AFF A700 node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_failed_or_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/retire_node1.html">
        Retire node1
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/netboot_node1.html">
        Netboot node1
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3. Boot node1 with the AFF A900 controller module and NVRAM module</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/boot_node1_with_a900_controller_and_nvs.html">
        Boot node1 with the AFF A900 controller module and NVRAM module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_node1_installation.html">
        Verify the node1 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/restore_key_manager_config_upgraded_node1.html">
        Restore key-manager configuration on the upgraded node1
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/move_non_root_aggr_nas_lifs_node1_from_node2_to_upgraded_node1.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to the upgraded node1
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4. Relocate resources from node2 and retire node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/relocate_non_root_aggr_nas_lifs_from_node2_to_node1.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node1
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/retire_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5. Install the AFF A900 NVRAM module and controller module on node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/install_a900_nvs_and_controller_on_node2.html">
        Install AFF A900 NVRAM module and controller module on node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/netboot_node2.html">
        Netboot node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6. Boot node2 with the AFF A900 controller module and NVRAM module</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/boot_node2_with_a900_controller_and_nvs.html">
        Boot node2 with the AFF A900 controller module and NVRAM module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/verify_node2_installation.html">
        Verify the node2 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/restore_key_manager_config_node2.html">
        Restore key-manager configuration on node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/move_non_root_aggr_and_nas_data_lifs_back_to_node2.html">
        Move non-root aggregates and NAS data LIFs back to node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 7. Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/ensure_new_controllers_are_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/decommission_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshoot</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/troubleshoot_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-affa900/other_references.html">
        References
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.8 or later</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/automate_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_health_of_metrocluster_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/check_for_metrocluster_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_switchover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1. Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_1_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/get_ip_address_of_external_kms_for_storage_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2. Relocate and retire node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_2_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_non_root_aggr_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_failed_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/retire_node1.html">
        Retire node1
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3. Install and boot node3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_3_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node3.html">
        Install and boot node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_on_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/restore_key-manager_configuration_node3.html">
        Restore key-manager configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/move_non-root_aggr_and_nas_data_lifs_node1_from_node2_to_node3.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4. Relocate and retire node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_4_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/retire_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5. Install and boot node4</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_5_index.html">
        Overview
      </a></li><li class="  active "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/install_boot_node4.html">
        Install and boot node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_fc_or_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuration on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/restore_key-manager_config_node4.html">
        Restore key-manager configuration on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html">
        Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6. Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/stage_6_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/ensure_new_controllers_are_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/decommission_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshoot</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/troubleshoot_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto-app/other_references.html">
        References
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Manually upgrade controller hardware running ONTAP 9.8 or later</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/decide_to_use_arl_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/arl_upgrade_workflow.html">
        ARL upgrade workflow
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/guidelines_upgrade_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/required_tools_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_during_upgrade.html">
        Worksheet: Information to collect before and during the controller upgrade
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1. Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_1_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/determine_aggregates_on_internal_drives.html">
        Determine whether the controller has aggregates on internal disk drives
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/get_address_key_management_server_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/manage_authentication_kmip.html">
        Manage authentication using KMIP servers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/manage_authentication_okm.html">
        Manage authentication using an onboard key manager
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/quiesce_snapmirror_relationships.html">
        Quiesce the SnapMirror relationships
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2. Relocate and retire node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_2_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_non_root_aggr_node1_node2.html">
        Relocate non-root aggregates from node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node1_node2.html">
        Move NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/record_node1_information.html">
        Record node1 information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/retire_node1.html">
        Retire node1
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3. Install and boot node3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_3_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/install_boot_node3.html">
        Install and boot node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_fc_uta_uta2_config_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html">
        Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node3.html">
        Worksheet: Information to record before moving NAS data LIFs to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_non_root_aggr_node2_node3.html">
        Relocate non-root aggregates from node2 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node2_node3.html">
        Move NAS data LIFs owned by node2 to node3
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4. Record information and retire node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_4_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/record_node2_information.html">
        Record node2 information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/retire_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5. Install and boot node4</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_5_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/install_boot_node4.html">
        Install and boot node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_fc_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuarion on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html">
        Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/worksheet_information_before_moving_san_lifs_node4.html">
        Worksheet: Information to record before moving NAS data LIFs to node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/relocate_node2_non_root_aggr_node3_node4.html">
        Relocate node2's non-root aggregates from node3 to node4
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6. Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/stage_6_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/ensure_controllers_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_up_storage_encryption_new_controller.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/set_up_netapp_encryption_on_new_controller.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/decommission_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/resume_snapmirror_ops.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshoot</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/troubleshoot_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/reboots_panics_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/issues_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/lif_migration_failure.html">
        LIF migration failure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/lifs_invalid_ports_after_upgrade.html">
        LIFs are on invalid ports after upgrade
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual-app/other_references.html">
        References
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use "system controller replace" commands to upgrade controller hardware running ONTAP 9.5 to 9.7</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/automate_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/decide_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_health_of_metrocluster_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/check_metrocluster_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_switchover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1. Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_1_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/get_ip_address_of_external_kms_for_storage_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2. Relocate and retire node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_2_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_non_root_aggr_and_nas_data_lifs_node1_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_failed_or_vetoed_aggr.html">
        Relocate failed or vetoed aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/retire_node1.html">
        Retire node1
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3. Install and boot node3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_3_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/install_boot_node3.html">
        Install and boot node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_fc_or_uta_uta2_config_on_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/join_quorum_node_has_different_ports_stage3.html">
        Join the quorum when a node has a different set of network ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/move_non_root_aggr_nas_lifs_node1_from_node2_to_node3.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4. Relocate and retire node</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_4_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/relocate_non_root_aggr_nas_lifs_from_node2_to_node3.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/retire_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5. Install and boot node4</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_5_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/install_boot_node4.html">
        Install and boot node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_fc_or_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuration on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/join_quorum_node_has_different_ports_stage5.html">
        Join the quorum when a node has a different set of network ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/move_non_root_aggr_and_nas_data_lifs_node2_from_node3_to_node4.html">
        Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6. Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/stage_6_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/ensure_new_controllers_are_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_up_storage_encryption_new_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/set_up_netapp_volume_encryption_new_module.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/decommission_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/resume_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshoot</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/troubleshoot_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/issues_in_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-auto/other_references.html">
        References
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Manually upgrade controller hardware running ONTAP 9.7 or earlier</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/decide_to_use_arl_guide.html">
        Decide whether to use the aggregate relocation content
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/arl_upgrade_workflow.html">
        ARL upgrade workflow
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/guidelines_upgrade_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/required_tools_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_during_upgrade.html">
        Worksheet: Information to collect before and during the controller upgrade
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Reconfigure the FC switch layout for ONTAP 9.1 or later</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/reconfig_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/send_custom_asup_message_prior_reconfig_switches.html">
        Send a custom AutoSupport message prior to reconfiguring switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_health_mcc_config.html">
        Verify the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/check_mcc_config_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/persist_disable_switches.html">
        Persistently disable the switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/determine_new_cabling_layout.html">
        Determine the new cabling layout
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/apply_RCF_files_recable_switches.html">
        Apply RCF files and recable the switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/persist_enable_switches.html">
        Persistently enable the switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_swtichover_healing_switchback.html">
        Verify switchover, healing, and switchback
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1. Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_1_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/determine_aggregates_on_internal_drives.html">
        Determine whether the controller has aggregates on internal disk drives
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/prepare_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/get_address_key_management_server_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/manage_authentication_kmip.html">
        Manage authentication using KMIP servers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/manage_authentication_okm.html">
        Manage authentication using an onboard key manager
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/quiesce_snapmirror_relationships.html">
        Quiesce the SnapMirror relationships
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/prepare_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2. Relocate and retire node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_2_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_non_root_aggr_node1_node2.html">
        Relocate non-root aggregates from node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node1_node2.html">
        Move NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/record_node1_information.html">
        Record node1 information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/retire_node1.html">
        Retire node1
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3. Install and boot node3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_3_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/install_boot_node3.html">
        Install and boot node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_fc_uta_uta2_config_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/map_ports_node1_node3.html">
        Map ports from node1 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_node3_installation.html">
        Verify the node3 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node1_from_node2_node3_verify_san_lifs_node3.html">
        Move NAS data LIFs owned by node1 from node2 to node3 and verify SAN LIFs on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node3.html">
        Worksheet: Information to record before moving NAS data LIFs to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_non_root_aggr_node2_node3.html">
        Relocate non-root aggregates from node2 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node2_node3.html">
        Move NAS data LIFs owned by node2 to node3
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4. Record information and retire node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_4_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/record_node2_information.html">
        Record node2 information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/retire_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5. Install and boot node4</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_5_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/install_boot_node4.html">
        Install and boot node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_fc_uta_uta2_config_node4.html">
        Set the FC or UTA/UTA2 configuarion on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/map_ports_node2_node4.html">
        Map ports from node2 to node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/verify_node4_installation.html">
        Verify the node4 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/move_nas_lifs_node2_from_node3_node4_verify_san_lifs_node4.html">
        Move NAS data LIFs owned by node2 from node3 to node4 and verify SAN LIFs on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/worksheet_information_before_moving_san_lifs_node4.html">
        Worksheet: Information to record before moving NAS data LIFs to node4
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/relocate_node2_non_root_aggr_node3_node4.html">
        Relocate node2's non-root aggregates from node3 to node4
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6. Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/stage_6_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/ensure_controllers_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_up_storage_encryption_new_controller.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/set_up_netapp_encryption_on_new_controller.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/decommission_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/resume_snapmirror_ops.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshoot</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/troubleshoot_index.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/reboots_panics_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/issues_multiple_stages_of_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/lif_migration_failure.html">
        LIF migration failure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/lifs_invalid_ports_after_upgrade.html">
        LIFs are on invalid ports after upgrade
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-systems-upgrade/upgrade-arl-manual/other_references.html">
        References
      </a></li></ul></li></ul></li></ul>
</div>
<script>
  window.onscroll = () => {
    const value = -40 - (document.body.scrollHeight - (window.innerHeight + document.scrollingElement.scrollTop));
    
    document.getElementById("sidebar-height").style.bottom = Math.max(0,value) + "px";
};
</script>
<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>


  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container --><article class="page-content">
      <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">docs.netapp.com</a>
        </li>
        

        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/ontap-systems-upgrade/">AFF&nbsp;and&nbsp;FAS&nbsp;Controller&nbsp;Upgrade</a>
        </li>

      </ul>
    </div>
    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>

      <div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Install and boot node4</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2022-03-16 18:20:17 +0000">03/16/2022</time>
    
  

<span>Contributors
  <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-aoife">
    <img  class="avatar avatar-small"
          alt="netapp-aoife"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/92876203?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-pcarriga">
    <img  class="avatar avatar-small"
          alt="netapp-pcarriga"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/77334475?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


</p>

<div class="paragraph lead">
<p>You must install node4 in the rack, transfer node2&#8217;s connections to node4, boot node4, and install ONTAP. You must then reassign any of node2’s spare disks, any disks belonging to the root volume, and any non-root aggregates that were not relocated to node3 earlier in the process, as outlined in this section.</p>
</div>
<div class="paragraph">
<div class="title">About this task</div>
<p>The relocation operation is paused at the beginning of this stage. This process is mostly automated; the operation pauses to enable you to check its status. You must manually resume the operation.</p>
</div>
<div class="paragraph">
<p>You need to netboot node4 if it does not have the same version of ONTAP 9 that is installed on node2. After you install node4, boot it from the ONTAP 9 image stored on the web server. You can then download the correct files to the boot media device for subsequent system boots, by following the instructions in <a href="prepare_for_netboot.html">Prepare for netboot</a>.</p>
</div>
<div class="ulist">
<div class="title">Important:</div>
<ul>
<li>
<p>If you are upgrading a V-Series system connected to storage arrays or a system with FlexArray Virtualization software that is connected to storage arrays, you must complete <a href="#auto_install4_step1">Step 1</a> through <a href="#auto_install4_step21">Step 21</a>, then leave this section and follow instructions to <a href="set_fc_or_uta_uta2_config_node4.html#configure-fc-ports-on-node4">Configure FC ports on node4</a> and to <a href="set_fc_or_uta_uta2_config_node4.html#check-and-configure-utauta2-ports-on-node4">Check and configure UTA/UTA2 ports on node4</a>, entering commands in Maintenance mode. You must then return to this section and resume with <a href="#auto_install4_step23">Step 23</a>.</p>
</li>
<li>
<p>However, if you are upgrading a system with storage disks, you must complete this entire section and then proceed to <a href="set_fc_or_uta_uta2_config_node4.html">Set the FC or UTA/UTA2 configuration on node4</a>, entering commands at the cluster prompt.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p><a id="auto_install4_step1"></a>Make sure that node4 has sufficient rack space.</p>
<div class="paragraph">
<p>If node4 is in a separate chassis from node2, you can put node4 in the same location as node3. If node2 and node4 are in the same chassis, then node4 is already in its appropriate rack location.</p>
</div>
</li>
<li>
<p>Install node4 in the rack, following the instructions in the <em>Installation and Setup Instructions</em> for the node model.</p>
</li>
<li>
<p>Cable node4, moving the connections from node2 to node4.</p>
<div class="paragraph">
<p>Cable the following connections, using the instructions in the <em>Installation and Setup Instructions</em> or the <em>FlexArray Virtualization Installation Requirements and Reference</em> for the node4 platform, the appropriate disk shelf document, and <em>High Availability management</em>.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="other_references.html">References</a> to link to the <em>FlexArray Virtualization Installation Requirements and Reference</em> and <em>High Availability management</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Console (remote management port)</p>
</li>
<li>
<p>Cluster ports</p>
</li>
<li>
<p>Data ports</p>
</li>
<li>
<p>Cluster and node management ports</p>
</li>
<li>
<p>Storage</p>
</li>
<li>
<p>SAN configurations: iSCSI Ethernet and FC switch ports</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
You might not need to move the interconnect card/FC-VI card or interconnect/FC-VI cable connection from node2 to node4 because most platform models have unique interconnect card models.<br>
For the MetroCluster configuration, you must move the FC-VI cable connections from node2 to node4. If the new host does not have an FC-VI card, you might need to move the FC-VI card.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Turn on the power to node4, and then interrupt the boot process by pressing <code>Ctrl-C</code> at the console terminal to access the boot environment prompt.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
When you boot node4, you might see the following warning message:
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>WARNING: The battery is unfit to retain data during a power outage. This is likely
         because the battery is discharged but could be due to other temporary
         conditions.
         When the battery is ready, the boot process will complete
         and services will be engaged. To override this delay, press 'c' followed
         by 'Enter'</pre>
</div>
</div>
</li>
<li>
<p>If you see the warning message in Step 4, take the following actions:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check for any console messages that might indicate a problem other than a low NVRAM battery, and, if necessary, take any required corrective action.</p>
</li>
<li>
<p>Allow the battery to charge and the boot process to complete.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/warning.svg" alt="Warning">
</td>
<td class="content">
<strong>Attention: Do not override the delay; failure to allow the battery to charge could result in a loss of data.</strong>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
Refer to <a href="prepare_for_netboot.html">Prepare for netboot</a>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><a id="step6"></a>Configure the netboot connection by choosing one of the following actions.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
You must use the management port and IP as the netboot connection. Do not use a data LIF IP or a data outage might occur while the upgrade is being performed.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If Dynamic Host Configuration Protocol (DHCP) is&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Running</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure the connection automatically by using the following command at the boot environment prompt:<br>
<br>
<code>ifconfig e0M -auto</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not running</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manually configure the connection by entering the following command at the boot environment prompt:<br>
<br>
<code>ifconfig e0M -addr=&lt;filer_addr&gt; -mask=&lt;netmask&gt; -gw=&lt;gateway&gt; - dns=&lt;dns_addr&gt; domain=&lt;dns_domain&gt;</code><br>
<br>
 <code>&lt;filer_addr&gt;</code> is the IP address of the storage system.<br>
 <code>&lt;netmask&gt;</code> is the network mask of the storage system.<br>
 <code>&lt;gateway&gt;</code> is the gateway for the storage system.<br>
 <code>&lt;dns_addr&gt;</code> is the IP address of a name server on your network. This parameter is optional.<br>
 <code>&lt;dns_domain&gt;</code> is the DNS domain name. This parameter is optional.<br>
<br>
<strong>Note</strong>: Other parameters might be necessary for your interface. Enter <code>help ifconfig</code> at the firmware prompt for details.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Perform netboot on node4:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">For&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAS/AFF8000 series systems</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>netboot http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/netboot/kernel</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">All other systems</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>netboot http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>&lt;path_to_the_web-accessible_directory&gt;</code> should lead to where you downloaded the <code>&lt;ontap_version&gt;_image.tgz</code> in Step 1 in the section <a href="prepare_for_netboot.html">Prepare for netboot</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
Do not interrupt the boot.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>From the boot menu, select option <code>(7) Install new software first</code>.</p>
<div class="paragraph">
<p>This menu option downloads and installs the new ONTAP image to the boot device.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
Disregard the following message: <code>This procedure is not supported for Non-Disruptive Upgrade on an HA pair</code><br>
The note applies to nondisruptive upgrades of ONTAP, and not upgrades of controllers.<br>
Always use netboot to update the new node to the desired image. If you use another method to install the image on the new controller, the wrong image might install. This issue applies to all ONTAP releases.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If you are prompted to continue the procedure, enter <code>y</code>, and when prompted for the package, enter the URL:</p>
<div class="paragraph">
<p><code>http://&lt;web_server_ip/path_to_web-accessible_directory&gt;/&lt;ontap_version&gt;_image.tgz</code></p>
</div>
</li>
<li>
<p>Complete the following substeps to reboot the controller module:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter <code>n</code> to skip the backup recovery when you see the following prompt:</p>
<div class="literalblock">
<div class="content">
<pre>Do you want to restore the backup configuration now? {y|n}</pre>
</div>
</div>
</li>
<li>
<p>Reboot by entering <code>y</code> when you see the following prompt:</p>
<div class="literalblock">
<div class="content">
<pre>The node must be rebooted to start using the newly installed software. Do you want to reboot now? {y|n}</pre>
</div>
</div>
<div class="paragraph">
<p>The controller module reboots but stops at the boot menu because the boot device was reformatted, and the configuration data must be restored.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Select maintenance mode <code>5</code> from the boot menu and enter <code>y</code> when you are prompted to continue with the boot.</p>
</li>
<li>
<p>Verify that the controller and chassis are configured as HA:</p>
<div class="paragraph">
<p><code>ha-config show</code></p>
</div>
<div class="paragraph">
<p>The following example shows the output of the <code>ha-config show</code> command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Chassis HA configuration: ha
Controller HA configuration: ha</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/ontap-systems-upgrade/images/note.svg" alt="Note">
</td>
<td class="content">
System records in a PROM whether they are in an HA pair or stand-alone configuration. The state must be the same on all components within the stand-alone system or HA pair.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If the controller and chassis are not configured as HA, use the following commands to correct the configuration:</p>
<div class="paragraph">
<p><code>ha-config modify controller ha</code></p>
</div>
<div class="paragraph">
<p><code>ha-config modify chassis ha</code></p>
</div>
<div class="paragraph">
<p>If you have a MetroCluster configuration, use the following commands to modify the controller and chassis:</p>
</div>
<div class="paragraph">
<p><code>ha-config modify controller mcc</code></p>
</div>
<div class="paragraph">
<p><code>ha-config modify chassis mcc</code></p>
</div>
</li>
<li>
<p>Exit maintenance mode:</p>
<div class="paragraph">
<p><code>halt</code></p>
</div>
<div class="paragraph">
<p>Interrupt the autoboot by pressing Ctrl-C at the boot environment prompt.</p>
</div>
</li>
<li>
<p><a id="auto_install4_step15"></a>On node3, check the system date, time, and time zone:</p>
<div class="paragraph">
<p><code>date</code></p>
</div>
</li>
<li>
<p>On node4, check the date by using the following command at the boot environment prompt:</p>
<div class="paragraph">
<p><code>show date</code></p>
</div>
</li>
<li>
<p>If necessary, set the date on node4:</p>
<div class="paragraph">
<p><code>set date &lt;mm/dd/yyyy&gt;</code></p>
</div>
</li>
<li>
<p>On node4, check the time by using the following command at the boot environment prompt:</p>
<div class="paragraph">
<p><code>show time</code></p>
</div>
</li>
<li>
<p>If necessary, set the time on node4:</p>
<div class="paragraph">
<p><code>set time &lt;hh:mm:ss&gt;</code></p>
</div>
</li>
<li>
<p>If necessary, set the partner system ID on node4:</p>
<div class="paragraph">
<p><code>setenv partner- sysid &lt;node2_sysid&gt;</code></p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Save the settings:</p>
<div class="paragraph">
<p><code>saveenv</code></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><a id="auto_install4_step21"></a>On the new node, in boot loader, the <code>partner- sysid</code> parameter must be set. For node4, <code>partner- sysid</code> must be that of node3. Verify the <code>partner- sysid</code> for node3:</p>
<div class="paragraph">
<p><code>printenv partner- sysid</code></p>
</div>
</li>
<li>
<p><a id="step22"></a>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If your system&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has disks and no back-end storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to <a href="#auto_install4_step23">Step 23</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or a system with FlexArray Virtualization software connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to section <a href="set_fc_or_uta_uta2_config_node4.html">Set the FC or UTA/UTA2 configuration on node4</a> and complete the subsections in this section.</p>
</li>
<li>
<p>Return to this section and complete the remaining steps, beginning with <a href="#auto_install4_step23">Step 23</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Important</strong>: You must reconfigure FC onboard ports, CNA onboard ports, and CNA cards before you boot ONTAP on the V-Series or system with FlexArray Virtualization software.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="23">
<li>
<p><a id="auto_install4_step23"></a>Add the FC initiator ports of the new node to the switch zones.</p>
<div class="paragraph">
<p>If your system has a tape SAN, then you need zoning for the initiators. If required, modify the onboard ports to initiator by referring to the <a href="set_fc_or_uta_uta2_config_node4.html#configure-fc-ports-on-node4">Configure FC ports on node4</a>. See your storage array and zoning documentation for further instructions on zoning.</p>
</div>
</li>
<li>
<p>Add the FC initiator ports to the storage array as new hosts, mapping the array LUNs to the new hosts.</p>
<div class="paragraph">
<p>See your storage array and zoning documentation for instructions.</p>
</div>
</li>
<li>
<p>Modify the worldwide port name (WWPN) values in the host or volume groups associated with array LUNs on the storage array.</p>
<div class="paragraph">
<p>Installing a new controller module changes the WWPN values associated with each onboard FC port.</p>
</div>
</li>
<li>
<p>If your configuration uses switch-based zoning, adjust the zoning to reflect the new WWPN values.</p>
</li>
<li>
<p><a id="step27"></a>If NetApp Storage Encryption (NSE) is in use on this configuration, the <code>setenv bootarg.storageencryption.support</code> command must be set to <code>true</code>, and the <code>kmip.init.maxwait</code> variable must be set to <code>off</code> to avoid a boot loop after the node2 configuration is loaded:</p>
<div class="paragraph">
<p><code>setenv bootarg.storageencryption.support true</code></p>
</div>
<div class="paragraph">
<p><code>setenv kmip.init.maxwait off</code></p>
</div>
</li>
<li>
<p>Boot node into boot menu:</p>
<div class="paragraph">
<p><code>boot_ontap menu</code></p>
</div>
<div class="paragraph">
<p>If you do not have an FC or UTA/UTA2 configuration, execute <a href="set_fc_or_uta_uta2_config_node4.html#auto_check_node4_step15">Check and configure UTA/UTA2 ports on node4, Step 15</a> so that node4 can recognize node2’s disks.</p>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic" start="29">
<li>
<p><a id="step29"></a>For MetroCluster configuration, V-Series systems and systems with FlexArray Virtualization software connected to storage arrays you must set and configure the FC or UTA/UTA2 ports on node4 to detect the disks attached to the node.<br>
To complete this task, go to section <a href="set_fc_or_uta_uta2_config_node4.html">Set the FC or UTA/UT2 configuration on node4</a>.</p>
</li>
</ol>
</div>

    </article>
    <!-- Page Container -->
  </div>

  <div style="clear: both"></div><!-- Main needs to have height --></div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2022 NetApp, Inc.</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/terms-of-use/">Terms of Use</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/privacy-policy/">Privacy Policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/cookie-policy/">Cookie Policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a class="ot-sdk-show-settings">Cookie Settings</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="n-footer__bottom-right">
        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <span class="n-footer__fine-print">Have feedback for our website?</span>
              <a target="_self" href="javascript:netapp_mailto()">Let us know</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://docs.netapp.com/us-en/announcements/">Announcements</a>
            </li>
          </ul>
        </div>
        <div class="n-footer__social-links">
          <ul class="n-footer__social-link-list">
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com"
                target="_blank" title="blog" alt="blog">
                <span class="n-footer__social-link-text">blog</span>
                <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                  <title>blog@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#blog"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/"
                target="_blank" title="community" alt="community">
                <span class="n-footer__social-link-text">community</span>
                <svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
                  <title>community@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#comments"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp"
                target="_blank" title="twitter" alt="twitter">
                <span class="n-footer__social-link-text">twitter</span>
                <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                  <title>twitter@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#twitter"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp"
                target="_blank" title="facebook" alt="facebook">
                <span class="n-footer__social-link-text">facebook</span>
                <svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
                  <title>facebook@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#facebook"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-linkedin"
                href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
                <span class="n-footer__social-link-text">linkedin</span>
                <svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
                  <title>linkedin@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#linkedin"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-youtube"
                href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
                <span class="n-footer__social-link-text">youtube</span>
                <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                  <title>youtube@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#youtube"></use>
                </svg>
              </a>
            </li>
            <li class="n-footer__social-link-list-item">
              <a class="n-footer__social-link" data-ntap-social="follow-slideshare"
                href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
                <span class="n-footer__social-link-text">slideshare</span>
                <svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
                  <title>slideshare@</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink"
                    xlink:href="/us-en/ontap-systems-upgrade/common/svg/sprite.svg#slideshare"></use>
                </svg>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

      </div><!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-systems-upgrade/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-systems-upgrade/js/www-ntap.js'></script>
    <script src='/us-en/ontap-systems-upgrade/js/tabbed-blocks.js'></script>
  </body></html>
